(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{68914:function(e,t,i){"use strict";i.r(t),i.d(t,{TVChartContainer:function(){return I},getObjectKeyFromValue:function(){return w}});var n=i(85893),s=i(67783),o=i.n(s),r=i(67294);function a(e,t){let i={...e};for(let n in t)"object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?void 0!==t[n]&&(i[n]=t[n]):i[n]=a(e[n],t[n]);return i}let h={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},l={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},d=!1,_=class{onChartReady(e){this._ready?e.call(this):this._readyHandlers.push(e)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(e){this._doWhenInnerApiLoaded(t=>{t.onGrayedObjectClicked(e)})}onShortcut(e,t){this._doWhenInnerWindowLoaded(i=>{i.createShortcutAction(e,t)})}subscribe(e,t){this._doWhenInnerApiLoaded(i=>{i.subscribe(e,t)})}unsubscribe(e,t){this._doWhenInnerApiLoaded(i=>{i.unsubscribe(e,t)})}chart(e){return this._innerAPI().chart(e)}getLanguage(){return this._options.locale}setSymbol(e,t,i){this._innerAPI().changeSymbol(e,t,i)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(e=>{e.closePopupsAndDialogs()})}selectLineTool(e){this._innerAPI().selectLineTool(e)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(e){this._innerAPI().saveChart(e)}load(e,t){this._innerAPI().loadChart({json:e,extendedData:t})}getSavedCharts(e){this._innerAPI().getSavedCharts(e)}loadChartFromServer(e){this._innerAPI().loadChartFromServer(e)}saveChartToServer(e,t,i){this._innerAPI().saveChartToServer(e,t,i)}removeChartFromServer(e,t){this._innerAPI().removeChartFromServer(e,t)}onContextMenu(e){this._doWhenInnerApiLoaded(t=>{t.onContextMenu(e)})}createButton(e){return this._innerWindow().createButton(e)}createDropdown(e){return this._innerWindow().createDropdown(e)}showNoticeDialog(e){this._doWhenInnerApiLoaded(t=>{t.showNoticeDialog(e)})}showConfirmDialog(e){this._doWhenInnerApiLoaded(t=>{t.showConfirmDialog(e)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(e){return this._innerAPI().getStudyInputs(e)}addCustomCSSFile(e){this._innerWindow().addCustomCSSFile(e)}applyOverrides(e){this._options=a(this._options,{overrides:e}),this._doWhenInnerWindowLoaded(t=>{t.applyOverrides(e)})}applyStudiesOverrides(e){this._doWhenInnerWindowLoaded(t=>{t.applyStudiesOverrides(e)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(e){this._innerAPI().setLayout(e)}layoutName(){return this._innerAPI().layoutName()}changeTheme(e,t){return this._innerWindow().changeTheme(e,t)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(e=>{e.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(e){this._innerAPI().drawOnAllCharts(e)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(e){this._innerAPI().setIntervalLinkingEnabled(e)}setTimeFrame(e){this._innerAPI().setTimeFrame(e)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(e){return this._innerAPI().takeClientScreenshot(e)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(e){this._ready?e(this._innerWindow()):this._innerWindowLoaded.then(()=>{e(this._innerWindow())})}_doWhenInnerApiLoaded(e){this._doWhenInnerWindowLoaded(t=>{t.doWhenApiIsReady(()=>e(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")}_create(){let e=this._render();this._options.container_id&&console.warn("`container_id` is now deprecated. Please use `container` instead to either still pass a string or an `HTMLElement`.");let t=this._options.container_id||this._options.container,i="string"==typeof t?document.getElementById(t):t;if(null===i)throw Error("There is no such element - #".concat(this._options.container));i.innerHTML=e,this._iFrame=i.querySelector("#".concat(this._id));let n=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(n.style.width="100%",this._options.fullscreen||(n.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(e=>{let t=()=>{n.removeEventListener("load",t,!1),e()};n.addEventListener("load",t,!1)}),this._innerWindowLoaded.then(()=>{this._innerWindow().widgetReady(()=>{for(let e of(this._ready=!0,this._readyHandlers))try{e.call(this)}catch(e){console.error(e)}this._innerWindow().initializationFinished()})})}_render(){let e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");let t=(this._options.library_path||"")+"".concat(encodeURIComponent(this._options.locale),"-tv-chart.e2a841ff.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'}constructor(e){if(this._id="tradingview_".concat((1048576*(1+Math.random())|0).toString(16).substring(1)),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw Error("Datafeed is not defined");if(this._options=a(l,e),e.preset){let t=h[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(d||(d=!0,console.log("Using CL v22.032 (internal id e2a841ff @ 2022-07-06T11:53:07.702Z)"))),this._create()}};window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"CL v22.032 (internal id e2a841ff @ 2022-07-06T11:53:07.702Z)"};let c={1:"1m",5:"5m",15:"15m",60:"1h",240:"4h","1D":"1d"};var u=i(57071),p=i(91608);let m=async(e,t)=>{let i=(0,u.FQ)(),n=[];try{let e=await fetch("".concat(p.JW,"/token/KLine/").concat(i.contractAddress,"/").concat({"1m":6e5,"5m":3e6,"15m":9e6,"1h":36e6,"4h":144e6,"1d":864e6}[t]),{headers:{Origin:p.JW}}),s=await e.json();if(200===s.code){let e=s.data.kLineData;e.forEach(e=>{e.time=parseInt(e.timestamp)/1e3}),n=e}else console.log(s.message)}catch(e){console.log(e.message)}return n};async function g(e){try{return 3087}catch(e){console.error(e)}}let f={period:"",data:[],ticker:""};class y{async getCurrentPriceOfToken(e){return g(e)}async getTokenLastBars(e,t,i){let n=(0,u.FQ)(),s=[];try{let e=await fetch("".concat(p.JW,"/token/getLastKLine/").concat(n.contractAddress,"/").concat({"1m":6e5,"5m":3e6,"15m":9e6,"1h":36e6,"4h":144e6,"1d":864e6}[t]),{headers:{Origin:p.JW}}),i=await e.json();if(200===i.code){let e=i.data;e.forEach(e=>{e.time=parseInt(e.timestamp)/1e3}),s=e}else console.log(i.message)}catch(e){console.log(e.message)}return s}async getTokenHistoryBars(e,t,i,n){let s=this.barsInfo;if(!s.data.length||s.ticker!==e||s.period!==t||n)try{let i=await m(e,t),n=function(e,t){if(e.length<2)return e;let i=Math.floor(Date.now()/(1e3*t))*(1e3*t)/1e3+u.Mg,n=e[e.length-1];n.time!==i&&e.push({...n,time:i});let s=[e[0]],o=e[0].time;for(let i=1;i<e.length;i++){let{time:n,open:r}=e[i];if(o){let e=Math.floor((n-o)/t)-1;for(let i=e;i>0;i--){let e={time:n-i*t,open:r,close:r,high:1.0003*r,low:.9996*r};s.push(e)}}o=n,s.push(e[i])}return s}(i,u.pQ[t]),s=(0,u.JX)(t),o=s-u.pQ[t],r=n[n.length-1];console.log(r,"lastBar"),(r.time===s||r.time===o)&&(this.lastBar={...r,ticker:e}),this.barsInfo.data=n,this.barsInfo.ticker=e,this.barsInfo.period=t}catch(e){console.error(e),this.barsInfo=f}let{from:o,to:r,countBack:a}=i,h=r+u.Mg,l=o+u.Mg,d=s.data.filter(e=>e.time>l&&e.time<=h);return d.length?d.length<a?d:d.slice(d.length-a,d.length):[]}async getBars(e,t,i,n,s){let o=c[t],{from:r,to:a}=n;try{return(i?function(e,t,i){let n=u.pQ[e],s=Math.floor(t/n)*n,o=Math.floor(i/n)*n,r=[];for(let e=s;e<=o;e+=n)r.push({time:e,open:1,close:1,high:1,low:1});return r.filter(e=>e.time>=t&&e.time<=i)}(o,r,a):await this.getTokenHistoryBars(e,o,n,s)).map(u.R5)}catch(e){console.log(e)}}async getLastBar(e,t){if(!e||!t)throw Error("Invalid input. Ticker, period, and chainId are required parameters.");let i=Date.now();if(i-this.startTime>15e3||this.lastTicker!==e||this.lastPeriod!==t){console.log(i-this.startTime,15e3);let n=await this.getTokenLastBars(e,t,1);if(null==n?void 0:n.length){let s=n[0];(0,u.JX)(t),u.pQ[t],this.lastBar={...s,ticker:e},this.startTime=i,this.lastTicker=e,this.lastPeriod=t}}return this.lastBar}async getLiveBar(e,t){console.log("getLiveBar");let i=c[t];if(!e||!i)return;let n=(0,u.JX)(i);try{this.lastBar=await this.getLastBar(e,i)}catch(e){console.error(e)}if(!this.lastBar)return;let s=await this.lastBar.close;if(this.lastBar.time&&n===this.lastBar.time&&e===this.lastBar.ticker)return{...this.lastBar,close:s,high:Math.max(this.lastBar.open,this.lastBar.high,s),low:Math.min(this.lastBar.open,this.lastBar.low,s),ticker:e};{let t={time:n,open:this.lastBar.close,close:s,high:Math.max(this.lastBar.close,s),low:Math.min(this.lastBar.close,s),ticker:e};return this.lastBar=t,this.lastBar}}constructor(){this.lastBar=null,this.startTime=0,this.lastTicker="",this.lastPeriod="",this.barsInfo=f}}let b={supported_resolutions:Object.keys(c),supports_marks:!1,supports_timescale_marks:!1,supports_time:!0,reset_cache_timeout:100};function w(e,t){return Object.keys(t).find(i=>t[i]===e)}let I=e=>{let{datafeed:t,resetCache:i}=function(e){let{dataProvider:t,coinInfo:i}=e,n=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(),h=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{t&&a.current!==t&&(a.current=t)},[t]),(0,r.useMemo)(()=>({resetCache:function(){var e;h.current=!0,null===(e=s.current)||void 0===e||e.call(s),h.current=!1},datafeed:{onReady:e=>{setTimeout(()=>{e(b)})},resolveSymbol(e,t){let i={name:e=(0,u.FQ)().coinSymbol,type:"crypto",description:e+" / USD",ticker:e,session:"24x7",pricescale:1e11,timezone:"Etc/UTC",locale:"en",has_intraday:!0,has_daily:!0,currency_code:"USD",visible_plots_set:"ohlc",data_status:"streaming",isStable:!1};setTimeout(()=>t(i))},async getBars(e,t,i,n,s){if(!c[t])return s("[getBars] Invalid resolution");let{ticker:r}=e;o.current!==r&&(o.current=r);try{var l;if(!r){s("Invalid ticker!");return}let e=await (null===(l=a.current)||void 0===l?void 0:l.getBars(r,t,!1,i,h.current)),o=!e||0===e.length;n(e,{noData:o})}catch(e){console.log(e),s("Unable to load historical data!")}},async subscribeBars(e,t,i,r,h){let{ticker:l,isStable:d}=e;l&&(n.current&&clearInterval(n.current),s.current=h,d||(n.current=setInterval(function(){var e;null===(e=a.current)||void 0===e||e.getLiveBar(l,t).then(e=>{e&&l===o.current&&i((0,u.R5)(e))})},15e3)))},unsubscribeBars:()=>{n.current&&clearInterval(n.current)}}}),[])}({dataProvider:new y}),s=(0,r.useRef)(),[a,h]=(0,r.useState)("1m");return(0,r.useEffect)(()=>{let i=localStorage.period||a,n=new _({symbol:e.symbol,datafeed:t,interval:w(i,c),container:s.current,library_path:e.library_path,locale:e.locale,disabled_features:e.disabled_features,enabled_features:e.enabled_features,charts_storage_url:e.charts_storage_url,charts_storage_api_version:e.charts_storage_api_version,client_id:e.client_id,user_id:e.user_id,fullscreen:e.fullscreen,autosize:e.autosize,favorites:e.favorites,custom_formatters:e.custom_formatters});return n.onChartReady(()=>{n.headerReady().then(()=>{}),null==n||n.activeChart().onIntervalChanged().subscribe(null,e=>{c[e]&&h(c[e])})}),()=>{n.remove()}},[e]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{ref:s,className:o().TVChartContainer,style:{height:"500px"}})})}},67783:function(e){e.exports={VersionHeader:"TVChartContainer_VersionHeader__vjDQ1",TVChartContainer:"TVChartContainer_TVChartContainer__4_i2p"}}}]);